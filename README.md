# IAS_dron_telemetry

Drone Telemetry and Control System

Description

This project implements a telemetry and control system for a drone, enabling real-time data monitoring and drone control from a PC acting as the control unit. The drone sends telemetry data (GPS location, barometric altitude, battery voltage, IR LED status) and real-time video (1080p@30fps) to the PC, which displays this information in an interactive graphical interface. The PC also sends control commands (pitch, roll, yaw, throttle) to the drone using a USB gamepad.
The software is developed in Python with a modular architecture that organizes the drone's subsystems (GPS, barometer, battery, IR LEDs, video) into separate files. The graphical interface uses Tkinter to display telemetry and video, Plotly for interactive charts (map, altitude, voltage), and OpenCV for real-time video streaming. The system is robust, handling errors such as video signal loss by displaying a black image and console messages.

Objectives

Monitor real-time location, altitude, battery status, and IR LED status of the drone.

Display FPV video (1080p@30fps) with night vision support.

Control the drone using a USB gamepad.

Log telemetry data to a CSV file for post-flight analysis.

Provide an interactive and modular graphical interface.

Project Structure

drone_telemetry/
├── main.py                # Main script coordinating subsystems, video, and control
├── gps_subsystem.py       # Functions for processing GPS data
├── barometer_subsystem.py # Functions for processing barometer data
├── battery_subsystem.py   # Functions for processing battery data
├── ir_subsystem.py        # Functions for processing IR LED data
├── video_subsystem.py     # Functions for processing and displaying video
├── drone_data.csv         # Telemetry data log
├── telemetry_plot.html    # Interactive Plotly charts
├── README.md              # Project documentation
├── LICENSE                # License

File Descriptions

main.py: Coordinates telemetry data reception (via RFD900x), video capture (via HDMI-USB capture card), and drone control (via USB gamepad). Implements the graphical interface with Tkinter, displaying telemetry, video, and generating Plotly charts.

gps_subsystem.py: Processes and formats GPS data (latitude, longitude, altitude).

barometer_subsystem.py: Processes and formats barometric altitude data.

battery_subsystem.py: Processes and formats battery voltage data.

ir_subsystem.py: Processes and formats IR LED status data.

video_subsystem.py: Manages real-time video capture and display. In case of errors (signal loss), displays a black image and logs "No frame could be read".

drone_data.csv: Stores telemetry logs (timestamp, latitude, longitude, GPS altitude, barometric altitude, voltage, IR status).

telemetry_plot.html: HTML file generated by Plotly with interactive charts (map, altitude, voltage).

README.md: Project documentation.

Software Requirements

Python 3.8+

Dependencies:

pip install pyserial pandas plotly pillow pygame numpy

For video, install OpenCV (optional, displays black image if not installed):

pip install opencv-python

Tkinter: Included with Python, but verify:

pip install tk

Installation and Setup

Clone the repository (or create the drone_telemetry folder):

mkdir drone_telemetry
cd drone_telemetry

Copy the provided .py files.

Install dependencies:

pip install pyserial pandas plotly pillow pygame numpy opencv-python

Usage Instructions

Launch the GUI:

Run main.py to view telemetry, video, and control the drone.

If cv2 is not installed or the capture card fails, the video panel displays a black image.

Control the drone:

Use the USB gamepad (joysticks for pitch, roll, yaw, throttle).

Commands are sent via RFD900x.

Monitor data:

Telemetry in the GUI (left panel).

Video in the GUI (right panel).

Charts in telemetry_plot.html (map, altitude, voltage).

Log in drone_data.csv.

Contributions

To contribute, create a pull request with improvements in:

New subsystems (e.g., LiDAR, thermal sensors).

GUI optimization (e.g., Dash integration).

Advanced data analysis (e.g., real-time statistics).

Hardware Components

Drone

Microcontroller: Arduino Mega 2560
Drone's brain, managing sensors, telemetry, and motor control.

GPS: NEO-6M
Provides latitude, longitude, and altitude (~2.5 m accuracy).
Connected via UART (Serial1).

Barometer: BMP280
Measures relative altitude (~1 m accuracy) and pressure.
Connected via I2C.

Primary Telemetry Module: RFD900x
Bidirectional communication (telemetry and commands) with 40 km range.
Frequency: 915 MHz.
Antenna: Dipole 915 MHz
Connected via UART (Serial2).

Backup Telemetry Module: LoRa SX1276
Backup or control communication (~1-5 km range).
Frequency: 915 MHz.

Antenna: Dipole 915 MHz
Connected via SPI.

Camera: HDZero Micro V3 Camera
Resolution: 1080p@30fps or 720p@60fps.

FOV: 155° (diagonal).
Latency: ~3-5 ms.
Supports night vision with IR LEDs.

Video Transmitter (VTX): HDZero Freestyle V2 VTX
Frequency: 5.8 GHz.
Power: 25-1000 mW

Range: 500-2000 m
Antenna: Pagoda 5.8 GHz

IR LEDs: 4x 850 nm, 3W
Provide night vision (~5-10 m range).
Controlled via MOSFET (pin 9).

Motors: 4x brushless 2212 920KV
Drone propulsion.

ESC: 4x SimonK 30A
Electronic speed controllers for motors.
Connected to PWM pins.

Batteries: 2x LiPo 11.1V 5000 mAh
Connected in parallel (~10,000 mAh).

Flight duration: ~15-20 minutes.

Capacitor: Low ESR 470 µF, 25V
Filters voltage spikes in the battery.

Additional Sensor: MPU-6050
Gyroscope/accelerometer for basic stabilization.
Connected via I2C.
